@model DomasticAidManagementSystem.Domain.Entities.User
<!DOCTYPE html>
<html lang="en">
@{
    Layout = null;
}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            background-image: url('/images/bg_1.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            height: 100vh;
            font-family: sans-serif;
            overflow: hidden;
        }

        /* Adjust background properties for mobile if needed */
        @@media screen and (max-width: 600px) {
            body

        {
            background-size: cover;
            position: fixed;
        }

        }

        #particles-js {
            height: 100%;
        }

        .loginBox {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 350px;
            padding: 20px;
            border: 2px solid transparent !important; /* Base border */
            border-radius: 15px !important; /* Rounded corners */
            animation: borderAnimation 3s infinite !important; /* Infinite animation */
            background-clip: padding-box !important; /* Prevent gradient overlap with border */
            background-color: rgba(0, 0, 0, 0.2);
        }

        /* Responsive adjustments for mobile view */
        @@media screen and (max-width: 600px) {
            .loginBox

        {
            width: 90%;
            padding: 15px;
        }

        }

        @@keyframes borderAnimation {
            0%

        {
            border-color: #f39c12;
            box-shadow: 0 0 10px #f39c12;
        }

        50% {
            border-color: #3498db;
            box-shadow: 0 0 15px #3498db;
        }

        100% {
            border-color: #f39c12;
            box-shadow: 0 0 10px #f39c12;
        }

        }

        .user {
            margin: 0 auto 20px;
            display: block;
        }

        h3 {
            margin: 0;
            padding: 0 0 20px;
            color: #59238F;
            text-align: center;
        }

        .loginBox input {
            width: 100%;
            margin-bottom: 20px;
        }

            .loginBox input[type="text"],
            .loginBox input[type="password"] {
                border: none;
                border-bottom: 2px solid #262626;
                outline: none;
                height: 40px;
                color: #fff;
                background: transparent;
                font-size: 16px;
                padding-left: 20px;
                box-sizing: border-box;
            }

        input::placeholder {
            color: #59238F;
            opacity: 1.2;
        }

        .loginBox input[type="text"]:hover,
        .loginBox input[type="password"]:hover {
            color: #42F3FA;
            border: 1px solid #42F3FA;
            box-shadow: 0 0 5px rgba(0, 255, 0, .3), 0 0 10px rgba(0, 255, 0, .2), 0 0 15px rgba(0, 255, 0, .1), 0 2px 0 black;
        }

        .loginBox input[type="text"]:focus,
        .loginBox input[type="password"]:focus {
            border-bottom: 2px solid #42F3FA;
        }

        .inputBox {
            position: relative;
        }

            .inputBox span {
                position: absolute;
                top: 10px;
                right: 20px;
                color: #262626;
                cursor: pointer;
            }

        .loginBox input[type="button"] {
            border: none;
            outline: none;
            height: 40px;
            font-size: 16px;
            background: #59238F;
            color: #fff;
            border-radius: 20px;
            cursor: pointer;
        }

        .loginBox a {
            color: #262626;
            font-size: 14px;
            font-weight: bold;
            text-decoration: none;
            text-align: center;
            display: block;
        }

            .loginBox a:hover {
                color: #00ffff;
            }

        p {
            color: #0000ff;
        }

        .backButton {
            border: none;
            outline: none;
            height: 40px;
            font-size: 16px;
            background: #ff5733;
            color: #fff;
            border-radius: 20px;
            cursor: pointer;
            text-align: center;
            display: block;
            width: 100%;
            margin-top: 10px;
        }

            .backButton:hover {
                background: #ff2e00;
            }

        /* Error message animation */
        .error-message {
            color: red;
            font-size: 12px;
            margin-top: 5px;
            display: none;
            animation: shake 0.5s ease;
        }

        .error-message_loogin {
            color: red;
            background-color: navajowhite;
            font-weight: bold;
            text-align: center;
            font-size: 18px !important;
            margin-top: 10px;
            display: none;
            animation: shake 0.5s ease;
        }

        @@keyframes shake {
            0%

        {
            transform: translateX(0);
        }

        25% {
            transform: translateX(-5px);
        }

        50% {
            transform: translateX(5px);
        }

        75% {
            transform: translateX(-5px);
        }

        100% {
            transform: translateX(0);
        }

        }
    </style>

    <script>
        function hideErrorMessage(selector) {
            setTimeout(function () {
                $(selector).fadeOut();
            }, 3000);
        }

        $(document).ready(function () {
            $("#passwordField").click(function () {
                var passwordField = $($(this).attr("toggle"));
                var fieldType = passwordField.attr("type");

                if (fieldType === "password") {
                    passwordField.attr("type", "text");
                    $(this).removeClass("fa-eye").addClass("fa-eye-slash");
                } else {
                    passwordField.attr("type", "password");
                    $(this).removeClass("fa-eye-slash").addClass("fa-eye");
                }
            });

            $('#loginBtn').on('click', function (e) {
                e.preventDefault();

                var username = $('#uname').val();
                var password = $('#pass').val();

                if (username === "") {
                    $('#usernameError').fadeIn();
                    hideErrorMessage('#usernameError');
                    return false;
                }
                if (password === "") {
                    $('#passwordError').fadeIn();
                    hideErrorMessage('#passwordError');
                                        return false;
                }

                var _login = {
                    FullName: username,
                    PasswordHash: password,
                };

                var $button = $(this);
                $button.prop('disabled', true).html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Verifying Credentials...');
                $.ajax({
                    url: '/Login/Login',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(_login),
                    success: function (response) {
                     if (response.status === 1) {
                             window.location.href = `/UserMaster/UserDashBoard?UserId=` + response.encryptedUserId;
                     } else {
                         $('#LoginError').text(response.statusMessage).fadeIn();
                         hideErrorMessage('#LoginError');
                     }                    },
                    error: function () {
                        $('#LoginError').text('An error occurred while processing your request. Please try again.').fadeIn();
                        hideErrorMessage('#LoginError');
                    },
                    complete: function () {
                        $button.prop('disabled', false).html('Login');
                    }
                });
            });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</head>
<body>
    <div class="loginBox">
        <h3>Domastic Aid</h3>
        <img class="user" src="https://i.ibb.co/yVGxFPR/2.png" alt="User Icon" height="100px" width="100px">
        <form action="login.php" method="post">
            <div class="inputBox">
                <input id="uname" type="text" name="FullName" placeholder="Username" required>
                <div class="error-message" id="usernameError">Enter User Name!</div>

                <input id="pass" type="password" name="PasswordHash" placeholder="Password" required>
                <span toggle="#pass" id="passwordField" class="fa fa-fw fa-eye field-icon"></span>
                <div class="error-message" id="passwordError">Enter Password!</div>
            </div>
            <input type="button" id="loginBtn" value="Login">
        </form>
        <a href="../Login/ForgotPassword">Forget Password</a>
        <div class="text-center">
            <p style="color: #59238F;"><a href="../Login/RegisterUser">Sign-Up</a></p>
        </div>
        <button class="backButton" onclick="window.location.href='../Login/AdminLogin'">Admin Login</button>
    </div>
   </body>
</html>
